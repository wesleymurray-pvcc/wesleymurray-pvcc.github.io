"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1027],{62521:function(e,t,i){i.d(t,{CP:function(){return M},SD:function(){return p},ef:function(){return I}});var n=i(59742),o=i(15586),a=i(38310),r=i(60869),s=i(45357),g=i(70156),l=i.n(g),d=i(4182),m=i(34419),u=i(9869),c=i(32215);let I=async(e,t)=>{let i=e.getState(),{dispatch:n}=e,{user:{plan:o},trial:{alchemy:{data:r}}}=i,g=!0,d=l()(r),m=(null==t?void 0:t.usingPhotoReal)||i.generation.settings.usingPhotoReal,u=(null==t?void 0:t.leonardoMagicVersion)||i.generation.settings.leonardoMagicVersion;if((0,a.XL)(o)){let e=await h({dispatch:n,alchemyTrialStateData:r});(g=e.usingAlchemy)||(m=!1,u=s.PROMPT_MAGIC_VERSIONS.v2),d=e.trialState}return{usingAlchemy:g,usingPhotoReal:m,leonardoMagicVersion:u,updatedAlchemyTrialStateData:d}},p=e=>{let{alchemyTrialStateData:t,thunkApi:i}=e,n=i.getState(),{dispatch:o}=i,{user:{plan:r},modals:{hasViewed:s}}=n;return(0,a.XL)(r)?_({dispatch:o,alchemyTrialStateData:t,hasViewed:s}):T({dispatch:o,hasViewed:s})},h=async e=>{let{alchemyTrialStateData:t,dispatch:i}=e,n={usingAlchemy:!1},o={usingAlchemy:!0},a=t;if(M())return{...o,trialState:null};if(!a&&!(a=await S(i)))return{...n,trialState:null};let{isInTrialPeriod:r,hasReachedDailyLimit:s}=a;return!r||s?{...n,trialState:a}:{...o,trialState:a}},S=async e=>{try{var t;let i=await o.Z.mutate({mutation:n.mEe});return e((0,u.Z)()),null===(t=i.data)||void 0===t?void 0:t.startUserAlchemyTrial}catch(e){return console.error("tryStartAlchemyTrial(): ".concat(e.message)),null}},_=e=>{let{dispatch:t,hasViewed:i,alchemyTrialStateData:n}=e;if(!n)return;let{isInTrialPeriod:o,hasReachedDailyLimit:a}=n,r=i[m.Z.FEATURE_INTRO_ALCHEMY_TRIAL];return o?a?t((0,d.I$)({modal:m.Z.ALCHEMY_GENERATIONS_USED})):r?void 0:t((0,d.I$)({modal:m.Z.FEATURE_INTRO_ALCHEMY_TRIAL})):t((0,d.I$)({modal:m.Z.ALCHEMY_EXPIRED}))},T=e=>{let{dispatch:t,hasViewed:i}=e;if(!i[m.Z.FEATURE_INTRO_ALCHEMY_TRIAL])return t((0,d.I$)({modal:m.Z.FEATURE_INTRO_ALCHEMY_TRIAL}))},M=()=>"true"===c.env.NEXT_PUBLIC_MOCK_ALCHEMY_ACCESS_UNRESTRICTED||"false"!==c.env.NEXT_PUBLIC_MOCK_ALCHEMY_ACCESS_UNRESTRICTED&&(0,r.getAlchemyAccessDetails)().unrestricted},62731:function(e,t,i){i.d(t,{CB:function(){return d},EL:function(){return l},Oz:function(){return g},PB:function(){return o}});var n,o,a=i(60869),r=i(45357),s=i(23464);(n=o||(o={})).IMG_2_IMG="IMG_2_IMG",n.IMG_PROMPT="IMG_PROMPT",n.INPAINT_OUTPAINT="INPAINT_OUTPAINT";let g={prompt:"",negativePrompt:"",modelId:a.generationDefaults.modelId.default,numberOfImages:4,width:640,height:832,guidanceScale:7,stepCount:10,scheduler:r.sd_generation_schedulers.LEONARDO,imageStrength:.3,photoRealStrength:s.fU.Medium,promptMagicStrength:.3,public:!0,tiling:!1,style:r.sd_generation_style.LEONARDO,seed:void 0,initImage:void 0,imagePrompts:[],makePrivate:!1,poseToImageType:r.POSE_TO_IMAGE_TYPE.POSE,poseToImageWeight:.75,imageToImageStrategy:"IMG_2_IMG",motionPrompts:[{prompt:"",durationSeconds:2}],highResolution:!1,contrastBoost:.5,resonance:15,usingAlchemy:!1,usingLeonardoMagic:a.generationDefaults.promptMagic.default,usingHighContrast:!0,usingPoseToImage:!1,usingMotion:a.generationDefaults.motion.default,usingSvd:a.generationDefaults.svd.default,usingPhotoReal:!1,photoRealVersion:a.PhotoRealVersion.V2,leonardoMagicVersion:r.PROMPT_MAGIC_VERSIONS.v2,elements:[],imageInputs:[],usingExpandedDomain:!1,usingFixedSeed:!1,usingNegativePrompt:!1,usingRecommendedDimensions:!0,teamId:void 0},l={usingAlchemy:!0,style:r.sd_generation_style.DYNAMIC},d=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.assign({...g},e)}},88153:function(e,t,i){i.d(t,{Z:function(){return _}});var n,o,a=i(60869),r=i(45357),s=i(53334),g=i(70156),l=i.n(g),d=i(94935),m=i(23464),u=i(38310),c=i(62731),I=i(77715),p=i(10390),h=i(32215);(n=o||(o={})).STATIC_ON="STATIC_ON",n.STATIC_OFF="STATIC_OFF",n.TOGGLED_ON="TOGGLED_ON ",n.TOGGLED_OFF="TOGGLED_OFF",n.STATIC_IMG_2_IMG_ON="STATIC_IMG_2_IMG_ON",n.STATIC_IMG_PROMPT_ON="STATIC_IMG_PROMPT_ON",n.TOGGLED_IMG_2_IMG_ON="TOGGLED_IMG_2_IMG_ON",n.TOGGLED_IMG_PROMPT_ON="TOGGLED_IMG_PROMPT_ON";class S{transform(e){let t={...e,toggleStatusImageToImage:this.getImageToImageStatus({mode:"imageToImageStrategy",...e}),toggleStatusPromptMagic:this.getToggleStatus({mode:"usingLeonardoMagic",...e}),toggleStatusPhotoReal:this.getToggleStatus({mode:"usingPhotoReal",...e}),toggleStatusAlchemy:this.getToggleStatus({mode:"usingAlchemy",...e}),toggleStatusSvd:this.getToggleStatus({mode:"usingSvd",...e})};return(this.prospectiveSettings={...e.currentSettings,...(0,u.WE)(e.nextSettings),...this.maximalDimensionTransform(t)},this.wasAlchemyToggledOn="TOGGLED_ON "===t.toggleStatusAlchemy,this.wasAlchemyToggledOff="TOGGLED_OFF"===t.toggleStatusAlchemy,this.wasPhotoRealToggledOn="TOGGLED_ON "===t.toggleStatusPhotoReal,this.wasPhotoRealToggledOff="TOGGLED_OFF"===t.toggleStatusPhotoReal,this.wasPromptMagicToggledOn="TOGGLED_ON "===t.toggleStatusPromptMagic,this.wasPromptMagicToggledOff="TOGGLED_OFF"===t.toggleStatusPromptMagic,this.wasImagePromptToggledOn="TOGGLED_IMG_PROMPT_ON"===t.toggleStatusImageToImage,this.wasSvdToggledOn="TOGGLED_ON "===t.toggleStatusSvd,this.wasSvdToggledOff="TOGGLED_OFF"===t.toggleStatusSvd,this.setPreconditionForIllegalValues(t),this.setPreconditionForImagePrompt(t),this.setPreconditionForSDXL(e),this.setEnsuredConditionForControlNet(),this.wasPhotoRealToggledOn)?this.normalizeForPhotoRealToggledOn(e,t):this.wasAlchemyToggledOff?this.normalizeForAlchemyToggledOff(e):this.wasPhotoRealToggledOff?this.normalizeForPhotoRealToggledOff():this.wasAlchemyToggledOn?this.normalizeForAlchemyToggledOn(t):this.wasPromptMagicToggledOn?this.normalizeForPromptMagicToggledOn(e):this.wasPromptMagicToggledOff?this.normalizeForPromptMagicToggledOff():this.wasImagePromptToggledOn?this.normalizeForImagePromptToggledOn():this.wasSvdToggledOn?this.normalizeForSvdToggledOn():this.wasSvdToggledOff?this.normalizeForSvdToggledOff():(this.normalizeGuidanceScale(),this.prospectiveSettings)}setPreconditionForIllegalValues(e){let{nextSettings:t,currentSettings:i}=e;i.promptMagicStrength||t.promptMagicStrength||(this.prospectiveSettings.promptMagicStrength=c.Oz.promptMagicStrength);let n=[m.fU.Low,m.fU.Medium,m.fU.High].includes(this.prospectiveSettings.photoRealStrength);i.photoRealVersion!==a.PhotoRealVersion.V2||t.photoRealVersion!==a.PhotoRealVersion.V1||m.nT.includes(i.style)||(this.prospectiveSettings.style=m.wo),(!e.nextSettings.motionPrompts||e.nextSettings.motionPrompts.length)&&e.currentSettings.motionPrompts.length||(this.prospectiveSettings.motionPrompts=c.Oz.motionPrompts),n||(this.prospectiveSettings.photoRealStrength=c.Oz.photoRealStrength),Object.keys(m.wX).includes(this.prospectiveSettings.modelId)&&!this.prospectiveSettings.usingAlchemy&&(this.prospectiveSettings.style=m.wX[this.prospectiveSettings.modelId].style);let o=this.getImageStrength();this.getImg2Img()&&null==o&&this.setImageStrength(c.Oz.imageStrength),this.prospectiveSettings.stepCount||(this.prospectiveSettings.stepCount=this.prospectiveSettings.scheduler===r.sd_generation_schedulers.LEONARDO?m.d9:m.f6)}setPreconditionForSDXL(e){let t=!!e.nextSettings.modelId,i=e.nextSettings.modelId&&(0,p.mA)(e.nextSettings.modelId),n=(0,p.mA)(e.currentSettings.modelId);t&&!i&&n&&e.currentSettings.usingAlchemy&&(this.log("".concat(this.setPreconditionForSDXL.name,": Re-enabled PMv3")),this.prospectiveSettings.leonardoMagicVersion=r.PROMPT_MAGIC_VERSIONS.v3,this.prospectiveSettings.usingLeonardoMagic=!0),t&&i&&(this.log("".concat(this.setPreconditionForSDXL.name,": Set SDXL values for Alchemy (and disabled PM)")),this.prospectiveSettings.usingLeonardoMagic&&(this.prospectiveSettings.usingAlchemy&&(this.prospectiveSettings.usingLeonardoMagic=!1),this.prospectiveSettings.leonardoMagicVersion=r.PROMPT_MAGIC_VERSIONS.v2))}setPreconditionForImagePrompt(e){var t;let i=this.prospectiveSettings.imageToImageStrategy,n=this.prospectiveSettings;if("TOGGLED_OFF"===e.toggleStatusPromptMagic){this.prospectiveSettings.imageToImageStrategy=c.PB.IMG_2_IMG;return}let o=(null===(t=this.getImagePrompts())||void 0===t?void 0:t.length)&&i===c.PB.IMG_PROMPT,a=this.getImg2Img()&&i===c.PB.IMG_2_IMG;if(o&&!this.prospectiveSettings.usingLeonardoMagic&&("TOGGLED_OFF"===e.toggleStatusAlchemy?(this.log("".concat(this.setPreconditionForImagePrompt.name,": Reverted to IMG_2_IMG strategy")),this.prospectiveSettings.imageToImageStrategy=c.PB.IMG_2_IMG):(this.log("".concat(this.setPreconditionForImagePrompt.name,": Set to PMV3 and enabled Prompt Magic")),this.prospectiveSettings.leonardoMagicVersion=r.PROMPT_MAGIC_VERSIONS.v3,this.prospectiveSettings.usingLeonardoMagic=!0)),e.nextSettings.usingLeonardoMagic&&e.nextSettings.leonardoMagicVersion===r.PROMPT_MAGIC_VERSIONS.v2){this.prospectiveSettings.imageToImageStrategy=c.PB.IMG_PROMPT;return}if(e.currentSettings.imageToImageStrategy===c.PB.IMG_PROMPT&&e.nextSettings.leonardoMagicVersion===r.PROMPT_MAGIC_VERSIONS.v3){this.prospectiveSettings.imageToImageStrategy=c.PB.IMG_2_IMG;return}a&&n.usingLeonardoMagic&&n.usingAlchemy&&(this.prospectiveSettings.leonardoMagicVersion=r.PROMPT_MAGIC_VERSIONS.v3)}setEnsuredConditionForControlNet(){this.modelInfoMap&&((0,d.Gl)({modelInfo:this.getSelectedModelInfoFromGenerationSettings(this.modelInfoMap,this.prospectiveSettings),initImage:this.isCanvas||!!this.getImg2Img(),usingLeonardoMagic:this.prospectiveSettings.usingLeonardoMagic,usingAlchemy:this.prospectiveSettings.usingAlchemy})||(this.log("".concat(this.setEnsuredConditionForControlNet.name,": Disabled Pose-to-Image")),this.prospectiveSettings.usingPoseToImage=!1))}getImagePrompts(){var e;return null===(e=this.prospectiveSettings.imageInputs)||void 0===e?void 0:e.filter(e=>e.type===I.N.ImagePrompt)}getImg2Img(){var e;return null===(e=this.prospectiveSettings.imageInputs)||void 0===e?void 0:e.find(e=>e.type===I.N.Img2Img)}getImageStrength(){var e;return null===(e=this.getImg2Img())||void 0===e?void 0:e.weighting}setImageStrength(e){let t=this.getImg2Img();t&&(t.weighting=e)}normalizeForAlchemyToggledOn(e){var t;this.log("".concat(this.normalizeForAlchemyToggledOn.name,": Called"));let i={...this.prospectiveSettings},n=null!==(t=e.currentSettings.modelId)&&void 0!==t?t:c.Oz.modelId,o=(0,p.mA)(n);return this.log("".concat(this.normalizeForAlchemyToggledOn.name,": Ensured PMV3")),i.usingLeonardoMagic=!0,i.usingPoseToImage=!1,i.style=m.Yt,i.usingExpandedDomain=!0,i.promptMagicStrength=m.oS,i.leonardoMagicVersion=r.PROMPT_MAGIC_VERSIONS.v3,this.log("".concat(this.normalizeForAlchemyToggledOn.name,": Switch to Image to Image")),i.imageToImageStrategy=c.PB.IMG_2_IMG,o&&(this.log("".concat(this.normalizeForAlchemyToggledOn.name,": Ensured prompt magic is turned off for SDXL model")),i.usingLeonardoMagic=!1),i}normalizeForAlchemyToggledOff(e){this.log("".concat(this.normalizeForAlchemyToggledOff.name,": Called"));let t=l()(this.prospectiveSettings);return e.currentSettings.usingPhotoReal&&(t=this.normalizeForPhotoRealToggledOff()),{...t,imageToImageStrategy:c.PB.IMG_2_IMG,promptMagicStrength:m.W3,leonardoMagicVersion:r.PROMPT_MAGIC_VERSIONS.v2,usingPhotoReal:!1,usingLeonardoMagic:!1,style:(0,p.gd)(this.prospectiveSettings.modelId)}}normalizeForPhotoRealToggledOn(e,t){this.log("".concat(this.normalizeForPhotoRealToggledOn.name,": Called"));let i=l()(this.prospectiveSettings);return e.currentSettings.usingAlchemy||(i=this.normalizeForAlchemyToggledOn(t)),{...i,modelId:i.photoRealVersion===a.PhotoRealVersion.V2?(0,p.r9)(i.modelId)?i.modelId:a.PhotoRealV2Models.KINO_XL.id:a.MODEL_IDS.PHOTOREAL,imageToImageStrategy:c.PB.IMG_2_IMG,photoRealStrength:m.v4,style:m.wo,usingNegativePrompt:!1,usingLeonardoMagic:!1,usingAlchemy:!0,usingSvd:!1}}normalizeForPhotoRealToggledOff(){return this.log("".concat(this.normalizeForPhotoRealToggledOff.name,": Called")),this.log("".concat(this.normalizeForPhotoRealToggledOff.name,": Ensured PMV3")),{...this.prospectiveSettings,style:m.Yt,usingLeonardoMagic:!0,promptMagicStrength:m.oS,leonardoMagicVersion:r.PROMPT_MAGIC_VERSIONS.v3,...(0,p.Dg)(this.prospectiveSettings.modelId)&&{modelId:c.Oz.modelId}}}normalizeForSvdToggledOn(){return this.log("".concat(this.normalizeForSvdToggledOn.name,": Called")),{...this.prospectiveSettings,usingNegativePrompt:!1,usingLeonardoMagic:!1,usingPoseToImage:!1,usingPhotoReal:!1,usingAlchemy:!1,usingSvd:!0,numberOfImages:a.MOTION_MAX_OUTPUTS_PER_GENERATION}}normalizeForSvdToggledOff(){return this.log("".concat(this.normalizeForSvdToggledOff.name,": Called")),{...this.prospectiveSettings,usingSvd:!1}}normalizeForPromptMagicToggledOn(e){this.log("".concat(this.normalizeForPromptMagicToggledOn.name,": Called"));let t={...this.prospectiveSettings};return this.prospectiveSettings.usingAlchemy&&(t.usingPhotoReal=!1),this.prospectiveSettings.leonardoMagicVersion===r.PROMPT_MAGIC_VERSIONS.v3&&(t.usingAlchemy=!0),(e.currentSettings.usingPhotoReal||(0,p.Dg)(e.currentSettings.modelId))&&(t.modelId=c.Oz.modelId),t.leonardoMagicVersion===r.PROMPT_MAGIC_VERSIONS.v2?t.imageToImageStrategy=c.PB.IMG_PROMPT:t.leonardoMagicVersion===r.PROMPT_MAGIC_VERSIONS.v3&&(t.imageToImageStrategy=c.PB.IMG_2_IMG),t}normalizeForPromptMagicToggledOff(){this.log("".concat(this.normalizeForPromptMagicToggledOff.name,": Called"));let e={...this.prospectiveSettings};return e.imageToImageStrategy=c.PB.IMG_2_IMG,e}normalizeForImagePromptToggledOn(){this.log("".concat(this.normalizeForImagePromptToggledOn.name,": Called")),this.log("".concat(this.normalizeForImagePromptToggledOn.name,": Ensured PMv2"));let e={...this.prospectiveSettings};return e.usingLeonardoMagic=!0,e.leonardoMagicVersion=r.PROMPT_MAGIC_VERSIONS.v2,e}maximalDimensionTransform(e){var t,i,n,o;let a={width:null!==(t=e.nextSettings.width)&&void 0!==t?t:e.currentSettings.width,height:null!==(i=e.nextSettings.height)&&void 0!==i?i:e.currentSettings.height,highResolution:null!==(n=e.nextSettings.highResolution)&&void 0!==n?n:e.currentSettings.highResolution};a.width*a.height<=1048576||(this.log("".concat(this.maximalDimensionTransform.name,": Disabled high resolution")),a.highResolution=!1);let r=null!==(o=e.nextSettings.usingRecommendedDimensions)&&void 0!==o?o:e.currentSettings.usingRecommendedDimensions;return r&&"TOGGLED_ON "===e.toggleStatusAlchemy&&(a.height=m.Ib,a.width=m.Ig),r&&"TOGGLED_ON "===e.toggleStatusPhotoReal&&(a.height=m.oL,a.width=m.b7),a.width=Math.min(a.width,m.eJ),a.height=Math.min(a.height,m.eJ),a}normalizeGuidanceScale(){let{guidanceScale:e}=this.prospectiveSettings;null==e&&(this.prospectiveSettings.guidanceScale=c.Oz.guidanceScale)}getSelectedModelInfoFromGenerationSettings(e,t,i){let n=t.modelId;return i||(i=n),e[i]||e[c.Oz.modelId]||{}}getImageToImageStatus(e){let{mode:t,currentSettings:i,nextSettings:n}=e;return i[t]===c.PB.IMG_2_IMG&&n[t]===c.PB.IMG_PROMPT?"TOGGLED_IMG_PROMPT_ON":i[t]===c.PB.IMG_PROMPT&&n[t]===c.PB.IMG_2_IMG?"TOGGLED_IMG_2_IMG_ON":i[t]===c.PB.IMG_2_IMG&&(n[t]===c.PB.IMG_2_IMG||null===n[t]||void 0===n[t])?"STATIC_IMG_2_IMG_ON":i[t]===c.PB.IMG_PROMPT&&(n[t]===c.PB.IMG_PROMPT||null===n[t]||void 0===n[t])?"STATIC_IMG_PROMPT_ON":null}getToggleStatus(e){let{mode:t,currentSettings:i,nextSettings:n}=e;return!1===i[t]&&!0===n[t]?"TOGGLED_ON ":!0===i[t]&&!1===n[t]?"TOGGLED_OFF":!0===i[t]&&(!0===n[t]||null===n[t]||void 0===n[t])?"STATIC_ON":!1===i[t]&&(!1===n[t]||null===n[t]||void 0===n[t])?"STATIC_OFF":null}log(e){let t="".concat(S.name," ➡️");s.n_({type:"state",category:"SettingsNormalizer",message:e,level:"debug"}),this.verbose&&console.log("".concat(t," ").concat(e))}constructor(e){var t;this.verbose=!!Number(h.env.NEXT_PUBLIC_SETTINGS_NORMALIZER_VERBOSITY),this.modelInfoMap=null!==(t=null==e?void 0:e.modelInfoMap)&&void 0!==t?t:null,this.isCanvas=!!(null==e?void 0:e.isCanvas),this.prospectiveSettings=c.Oz}}var _=S},94935:function(e,t,i){i.d(t,{AT:function(){return r},Dd:function(){return a},Gl:function(){return o}});var n=i(45357);let o=e=>{let{modelInfo:t,initImage:i,usingAlchemy:n,isCanvas:o=!1,usingLeonardoMagic:r}=e;if(n||r)return!1;let s=a(t,o),g=o||!!i;return s&&g},a=(e,t)=>!t||e.sdVersion===n.sd_versions.v1_5,r=e=>{let{usingAlchemy:t,usingPhotoReal:i,leonardoMagicVersion:o}=e;return t||i||o===n.PROMPT_MAGIC_VERSIONS.v3}},94110:function(e,t,i){i.d(t,{CI:function(){return s},FA:function(){return g},WO:function(){return u}});var n=i(62731),o=i(10390),a=i(23464),r=i(38310);let s=(e,t)=>(e.timestamp||0)-(t.timestamp||0),g=(e,t)=>{let i=(0,r.As)(t,e);return Object.values(a.lJ).includes(e)?i:(0,r.wX)(i,e,5)},l=e=>e.promptMagic&&!e.promptMagicStrength?e.initStrength:e.promptMagicStrength,d=e=>e.photoReal&&!e.photoRealStrength?e.initStrength:e.photoRealStrength,m=e=>e.promptMagic&&!e.promptMagicStrength||e.photoReal&&!e.photoRealStrength?null:e.initStrength,u=(e,t)=>{let i=(e.generation_elements||[]).filter(e=>!!e&&!!e.lora).map(e=>({id:e.lora.akUUID,weight:e.weightApplied,isEnabled:!0})),a={...n.Oz,contrastBoost:e.contrastRatio,guidanceScale:e.guidanceScale,height:e.imageHeight,highResolution:e.highResolution,imagePromptStrength:e.imagePromptStrength,imageStrength:m(e),leonardoMagicVersion:e.promptMagicVersion,modelId:e.modelId,negativePrompt:e.negativePrompt,prompt:e.prompt,resonance:e.guidanceScale,scheduler:e.scheduler,promptMagicStrength:l(e),photoRealStrength:d(e),stepCount:e.inferenceSteps,style:e.presetStyle,tiling:e.tiling,usingAlchemy:e.alchemy,usingPhotoReal:e.photoReal,usingHighContrast:e.highContrast,usingLeonardoMagic:e.promptMagic,usingNegativePrompt:!!e.negativePrompt,width:e.imageWidth,elements:i,public:t.public,usingRecommendedDimensions:t.usingRecommendedDimensions,...e.alchemy&&{guidanceScale:t.guidanceScale}},s={...n.Oz,...(e=>{let t={...e};return Object.keys(t).forEach(e=>null===t[e]&&delete t[e]),t})(a)},g=(0,r.pf)({width:s.width,height:s.height,usingAlchemy:s.usingAlchemy,usingHighRes:s.highResolution,promptMagicVersion:s.leonardoMagicVersion,usingPromptMagic:s.usingLeonardoMagic,usingPhotoReal:s.usingPhotoReal,usingAlchemyV2:s.usingAlchemy&&(0,o.mA)(s.modelId)&&!s.usingPhotoReal});return s.numberOfImages=t.numberOfImages>g?g:t.numberOfImages,s}},70720:function(e,t,i){i.d(t,{G8:function(){return W},aO:function(){return j},ZP:function(){return Q},sG:function(){return q},v8:function(){return k},Zv:function(){return J},IS:function(){return K},Sl:function(){return x},VZ:function(){return H},ET:function(){return B},Di:function(){return Y}});var n={};i.r(n),i.d(n,{addImagePrompt:function(){return N},addLoadingVariation:function(){return L},decrementUploadCount:function(){return y},deleteLoadingVariation:function(){return C},forgetModelId:function(){return P},incrementUploadCount:function(){return v},removeImageInputsUsingUploadId:function(){return w},removeImagePrompt:function(){return G},resetSettings:function(){return A},setImageGuidanceSidebarRedirectAsViewed:function(){return f},setLastModelId:function(){return E},setModelId:function(){return O},showAdvancedGenerationSettings:function(){return R}});var o=i(68714),a=i(38896),r=i(76295),s=i(72744),g=i(62731),l=i(88153),d=i(94110);let m={showAdvancedSettings:!1,lastModelIds:[],settings:(0,g.CB)(),isGenerating:!1,modelInfo:{modelInfoMap:{},leoModelInfoMap:{},customModelInfoMap:{},isLoading:!1,firstLoadComplete:!1},loadingVariations:{},imagesUploadingCount:0,recentImages:[],hasClosedImageGuidanceSidebarRedirect:!1};var u=i(64094),c=i(59742),I=i(23464),p=i(38310),h=i(10390),S=i(8473),_=i(86907),T=i(99505),M=i(77715);let O=(e,t)=>{e.lastModelIds=(0,d.FA)(t.payload,e.lastModelIds);let i=new l.Z().transform({currentSettings:e.settings,nextSettings:{...e.settings,modelId:t.payload}});Object.assign(e.settings,i)},E=(e,t)=>{(0,h.Nz)(t.payload)||(e.lastModelIds=(0,d.FA)(t.payload,e.lastModelIds))},P=(e,t)=>{e.lastModelIds=(0,p.As)(e.lastModelIds,t.payload)},R=(e,t)=>{e.showAdvancedSettings=t.payload},A=(e,t)=>{let i=t.payload,n={...m.settings,...i&&g.EL,public:e.settings.public};(0,T.IW)(e.settings,n)},v=e=>{e.imagesUploadingCount=e.imagesUploadingCount+1},f=e=>{e.hasClosedImageGuidanceSidebarRedirect=!0},y=e=>{e.imagesUploadingCount>0&&(e.imagesUploadingCount=e.imagesUploadingCount-1)},N=(e,t)=>{if(t.payload.useMultipleControlNetLogic){let i=e.settings.imageInputs.filter(e=>e.initImageId!==t.payload.image.id);if(!t.payload.image.id)throw Error("No initImageId passed to addImagePrompt reducer?");e.settings.imageInputs=(0,p.wX)(i,{type:M.N.ImagePrompt,initImageId:t.payload.image.id,initImageType:{[S.es.Upload]:c.esw.Uploaded,[S.es.Generated]:c.esw.Generated}[t.payload.image.type],isEnabled:!0,weighting:(0,u.O_)({imageInputType:M.N.ImagePrompt}).default,dimensions:t.payload.dimensions},I.Ih)}else{let i=e.settings.imagePrompts.filter(e=>e.url!==t.payload.image.url);e.settings.imagePrompts=(0,p.wX)(i,t.payload.image,I.Ih).sort(d.CI)}},G=(e,t)=>{if(t.payload.useMultipleControlNetLogic){let i=e.settings.imageInputs.filter(e=>e.initImageId!==t.payload.image.id);e.settings.imageInputs=i}else{let i=e.settings.imagePrompts.filter(e=>e.url!==t.payload.image.url);e.settings.imagePrompts=i.sort(d.CI)}},L=(e,t)=>{let{imageId:i,imageVariationType:n}=t.payload;return{...e,loadingVariations:{...e.loadingVariations,[i]:[...e.loadingVariations[i]||[],n]}}},C=(e,t)=>{let i=(0,_.Kb)(e.loadingVariations,t.payload);return{...e,loadingVariations:i}},w=(e,t)=>{e.settings.imageInputs=e.settings.imageInputs.filter(e=>!(e.initImageType===c.esw.Uploaded&&e.initImageId===t.payload))},F=(0,a.pH)(e=>({...e,imageInputs:(e.imageInputs||[]).map(e=>{let t={...e};return delete t.base64ImageUri,delete t.isUploading,t}),scheduler:m.settings.scheduler,seed:m.settings.seed,imageStrength:m.settings.imageStrength,stepCount:m.settings.stepCount,guidanceScale:m.settings.guidanceScale,usingFixedSeed:m.settings.usingFixedSeed,initImage:m.settings.initImage,imagePrompts:m.settings.imagePrompts,usingNegativePrompt:m.settings.usingNegativePrompt,photoRealStrength:m.settings.photoRealStrength,promptMagicStrength:m.settings.promptMagicStrength,usingHighContrast:m.settings.usingHighContrast,usingPoseToImage:m.settings.usingPoseToImage,poseToImageWeight:m.settings.poseToImageWeight,poseToImageType:m.settings.poseToImageType,highResolution:m.settings.highResolution,contrastBoost:m.settings.contrastBoost,resonance:m.settings.resonance,usingExpandedDomain:m.settings.usingExpandedDomain,tiling:m.settings.tiling}),e=>{let t=new l.Z;return e.imagePrompts=b(e.imagePrompts),e.imageInputs=b(e.imageInputs),e.motionPrompts&&e.motionPrompts.length||(e.motionPrompts=g.Oz.motionPrompts),t.transform({currentSettings:(0,g.CB)(),nextSettings:e})},{whitelist:["settings"]}),U=(0,a.pH)(e=>D(e),e=>D(e),{whitelist:["lastModelIds"]}),V=(0,a.pH)(e=>(e||[]).map(e=>{let t={...e};return delete t.base64ImageUri,delete t.isUploading,t}),e=>e,{whitelist:["recentImages"]}),D=e=>e.filter(e=>!I.Sc.includes(e)&&!I.mz.includes(e)),b=e=>e?Array.isArray(e)?e:[e]:[],z=(0,o.oM)({name:"generation",initialState:m,reducers:n,extraReducers:e=>{e.addCase(s.XX.pending,e=>({...e,modelInfo:{...e.modelInfo,isLoading:!0}})),e.addCase(s.XX.fulfilled,(e,t)=>({...e,modelInfo:{...t.payload,isLoading:!1,firstLoadComplete:!0}})),e.addCase(s.XX.rejected,e=>({...e,modelInfo:{...e.modelInfo,isLoading:!1}})),e.addCase(s.ew.pending,e=>({...e,isGenerating:!0})),e.addCase(s.ew.fulfilled,e=>({...e,isGenerating:!1})),e.addCase(s.ew.rejected,e=>({...e,isGenerating:!1})),e.addCase(s.I2.fulfilled,(e,t)=>({...e,settings:{...e.settings,...t.payload}})),e.addCase(s.kB.fulfilled,(e,t)=>({...e,settings:{...e.settings,...t.payload}}))}}),{setModelId:B,setLastModelId:H,resetSettings:x,forgetModelId:k,addImagePrompt:Z,removeImagePrompt:X,showAdvancedGenerationSettings:Y,addLoadingVariation:W,deleteLoadingVariation:q,incrementUploadCount:J,decrementUploadCount:j,setImageGuidanceSidebarRedirectAsViewed:$,removeImageInputsUsingUploadId:K}=z.actions;z.reducer;var Q=(0,a.OJ)({key:"generation",transforms:[F,V,U],storage:r.Z,whitelist:["settings","lastModelIds","hasClosedImageGuidanceSidebarRedirect","recentImages"]},z.reducer)},72744:function(e,t,i){i.d(t,{ew:function(){return G},kB:function(){return w},BM:function(){return L},I2:function(){return C},XX:function(){return N}});var n=i(68714),o=i(88153),a=i(94935),r=i(94110),s=i(70720),g=i(60869),l=i(45357),d=i(53334),m=i(24578),u=i.n(m),c=i(15586),I=i(23464),p=i(38310),h=i(10390),S=i(64094),_=i(59742),T=i(93219),M=i(72502),O=i(77715),E=i(62731);let P=e=>!e.usingLeonardoMagic||e.leonardoMagicVersion===l.PROMPT_MAGIC_VERSIONS.v3&&(0,h.mA)(e.modelId)||e.leonardoMagicVersion===l.PROMPT_MAGIC_VERSIONS.v3&&!e.usingAlchemy?{usingLeonardoMagic:!1}:{usingLeonardoMagic:e.usingLeonardoMagic,leonardoMagicVersion:(0,h.mA)(e.modelId)?l.PROMPT_MAGIC_VERSIONS.v2:e.leonardoMagicVersion},R=async(e,t,i)=>{var n,o,a,r;let s=i.getState(),{dispatch:m}=i,{modelId:T,prompt:R,width:f,height:y,negativePrompt:N,seed:G,numberOfImages:L,guidanceScale:C,stepCount:w,scheduler:F,imageStrength:U,promptMagicStrength:V,photoRealStrength:D,public:b,tiling:z,style:B,usingNegativePrompt:H,onPending:x,canvasInitId:k,canvasMaskId:Z,canvasRequestType:X,usingFixedSeed:Y,usingPoseToImage:W,poseToImageType:q,poseToImageWeight:J,usingHighContrast:j,sdVersion:$,dilate_mask:K,usingMotion:Q,usingAlchemy:ee,resonance:et,contrastBoost:ei,highResolution:en,usingExpandedDomain:eo,imageToImageStrategy:ea,elements:er,usingPhotoReal:es,photoRealVersion:eg,motionPrompts:el,imageInputs:ed=[],teamId:em}=e;(0,d.n_)({type:"state",category:"generateAiImage",message:"Processing settings for generation",data:e,level:"debug"});let eu=s.generation.modelInfo.modelInfoMap,ec=s.user.plan===l.plan.FREE,eI=null!==(a=null===(n=eu[T])||void 0===n?void 0:n.sdVersion)&&void 0!==a?a:$,ep=t=>!0===(0,S._m)({imageInput:t,imageInputIdx:0,imageInputs:ed.filter(e=>e.isEnabled),usingLeonardoMagic:e.usingLeonardoMagic,usingAlchemy:e.usingAlchemy,currentSdVersion:eI,leonardoMagicVersion:e.leonardoMagicVersion,usingPhotoReal:e.usingPhotoReal}),eh=ed.filter(e=>e.isEnabled&&ep(e)),eS=eh.find(e=>e.type===O.N.Img2Img),e_=eh.filter(e=>e.type===O.N.ImagePrompt),eT=ed.filter(e=>e.type===O.N.ControlNet&&e.isEnabled),eM=(await (0,p.cY)({controlnets:eT,imageInputs:ed.filter(e=>e.isEnabled),apolloClient:c.Z,usingAlchemy:e.usingAlchemy,currentSdVersion:eI,leonardoMagicVersion:e.leonardoMagicVersion,usingPhotoReal:e.usingPhotoReal,usingLeonardoMagic:e.usingLeonardoMagic,currentPlan:s.user.plan})).map(e=>({preprocessorId:e.preprocessorId,initImageType:e.initImageType,initImageId:e.initImageId,weight:e.weighting})).slice(0,ec?g.CONTROLNETS_LIMIT_FREE_USER:g.CONTROLNETS_LIMIT_PREMIUM_USER),{usingLeonardoMagic:eO,leonardoMagicVersion:eE}=P(e),eP=H?N:"",eR=!!((k||Z)&&X),eA=!(0,h.Nz)(T),ev=Y?G:void 0,ef={leonardoMagic:eO};if(ea===E.PB.IMG_PROMPT){let e=e_.map(e=>null==e?void 0:e.initImageId).filter(Boolean);ef.imagePrompts=e}eS&&!eR&&(eS.initImageType===_.esw.Uploaded?ef.init_image_id=eS.initImageId:eS.initImageType===_.esw.Generated&&(ef.init_generation_image_id=eS.initImageId));let ey=(null==eS?void 0:eS.type)===O.N.Img2Img?eS.weighting:U,eN=!!e_.length,eG=null===(o=e_[0])||void 0===o?void 0:o.weighting,eL={init_strength:eS||eR?ey:void 0,imagePromptWeight:eN?eG:void 0,promptMagicStrength:eO?V:void 0,photoRealStrength:es&&eg!==g.PhotoRealVersion.V2?D:void 0},eC={};ee&&(eC={alchemy:!0},(es||!(0,h.mA)(null!=T?T:""))&&(eC.highResolution=!!en,eC.contrastRatio=ei,eC.guidance_scale=et));let ew=u()(16).toString("hex"),eF=null!==(r=eu[T])&&void 0!==r?r:$?I.wX[$]:null,eU={id:ew,imageWidth:f,imageHeight:y,prompt:R,negativePrompt:eP,coreModel:l.core_models.SD,custom_model:{id:T,name:eF&&eF.name?eF.name:"Error"},status:I.bw,createdAt:"0",presetStyle:B,quantity:L,seed:ev,public:b,inferenceSteps:w,modelId:T,guidanceScale:C,scheduler:F,tiling:z,highContrast:j,promptMagic:eO,generation_controlnets:[],generation_elements:(0,p.hr)(c.Z,es?l.sd_versions.v1_5:eI,er||[]).map(e=>{let t=(0,p.U8)(e.id),i=c.Z.readFragment({id:t,fragment:_.UzV});return{__typename:"generation_elements",id:e.id,weightApplied:e.weight,lora:i}}),photoReal:es};null==x||x(eU);let eV={arg1:{prompt:R,negative_prompt:eP,nsfw:!0,num_images:L,width:f,height:y,num_inference_steps:w,guidance_scale:C,sd_version:eI,modelId:(0,h.VU)({usingPhotoReal:es,customRequest:eA,photoRealVersion:eg,modelId:T}),presetStyle:B,scheduler:F,public:null==b||b,tiling:null!=z&&z,seed:ev,...ef,...eL,...eC,...eR?{canvasInitId:k,canvasMaskId:Z,canvasRequestType:X,canvasRequest:eR}:{},poseToImage:W,poseToImageType:q,weighting:J,highContrast:(!!eO||!!es)&&j,dilate_mask:K,expandedDomain:ee?eo:void 0,leonardoMagicVersion:eE,elements:(0,p.hr)(c.Z,es&&eg!==g.PhotoRealVersion.V2?l.sd_versions.v1_5:eI,er||[]).map(e=>({akUUID:e.id,weight:e.weight})),controlnets:eM,photoReal:es,photoRealVersion:es?eg:void 0,teamId:em}};return Q&&t.isMotionEnabled?v(ew,{public:b,modelId:T,height:y,width:f,style:B,numImages:L,scheduler:"LEONARDO",segments:[{...el[0],negativePrompt:H?N:""}]},{onSuccess:()=>{m((0,M.hk)())}}):A(ew,eV,{onSuccess:()=>{m((0,M.hk)())}})},A=async(e,t,i)=>{var n,o,a;let{onSuccess:r}=i;null===(n=T.Z.getHeap())||void 0===n||n.track(g.trackingCustomEvents.imageGenerationRequest.id,t.arg1),(0,d.n_)({type:"state",category:"generateAiImage",message:"Submitting mutation",data:t.arg1,level:"debug"});try{let i=await c.Z.mutate({mutation:_.Pgg,variables:t});r();let n=null==i?void 0:null===(a=i.data)||void 0===a?void 0:null===(o=a.sdGenerationJob)||void 0===o?void 0:o.generationId;if(!n)throw Error("Error on AI Image Generation. Could not deduplicate request (".concat(n,"). No returned id."));return{requestId:e,newGenerationId:n}}catch(t){return console.error("Error on generate-mutations: AI Image Generation",t),{error:t,requestId:e}}},v=async(e,t,i)=>{var n,o,a;let{onSuccess:r}=i;null===(n=T.Z.getHeap())||void 0===n||n.track(g.trackingCustomEvents.motionGenerationRequest.id,t),(0,d.n_)({type:"state",category:"generateAiMotion",message:"Submitting mutation",data:t,level:"debug"});try{let i=await c.Z.mutate({mutation:_.t9d,variables:t});r();let n=null==i?void 0:null===(a=i.data)||void 0===a?void 0:null===(o=a.motionGenerationJob)||void 0===o?void 0:o.generationId;if(!n)throw Error("Error on AI Motion Generation. Could not deduplicate request (".concat(n,"). No returned id."));return{requestId:e,newGenerationId:n}}catch(t){return console.error("Error on generate-mutations: AI Motion Generation",t),{error:t,requestId:e}}};var f=i(62521);let y=async(e,t)=>{let i={},n={},o={},a=[],r=Array.from(new Set([...I.Sc,...e])),{data:s}=await c.Z.query({query:_.dyi,variables:{where:{id:{_in:r}}},fetchPolicy:"network-only"});for(let e of s.custom_models||[]){var l,d,m;let t=e.id;a.push(t);let r=(null===(l=e.generated_image)||void 0===l?void 0:l.url)||(null===(m=e.generations[0])||void 0===m?void 0:null===(d=m.generated_images[0])||void 0===d?void 0:d.url),s={...e,id:t,image:r,style:(0,h.gd)(t),motion:void 0===e.motion?null:e.motion,instancePrompt:e.instancePrompt||"",sdVersion:e.sdVersion};i[t]=s,(0,h.bo)(t)?n[t]=s:o[t]=s}for(let i of(o[g.LEONARDO_MOTION_MODEL_ID]&&(o[g.LEONARDO_MOTION_MODEL_ID].image="/img/motion-model.webp"),e))a.includes(i)||t(i);return[{...i,...I.wX},n,o]},N=(0,n.hg)("generation/updateModelInfoMaps",async(e,t)=>{try{let i=t.getState(),n=t.dispatch,[o,a,r]=await y([...e,...i.generation.lastModelIds],e=>{n((0,s.v8)(e)),e===i.generation.settings.modelId&&n((0,s.ET)(E.Oz.modelId))});return{modelInfoMap:o,leoModelInfoMap:a,customModelInfoMap:r}}catch(e){throw console.error("Error in redux/generation/updateModelInfoMaps",e),Error("Error in redux/generation/updateModelInfoMaps")}}),G=(0,n.hg)("generation/genAiImage",async(e,t)=>{let{settings:i,flags:n}=e,o=await R(i,n,t);return o.error&&console.error("Error in redux/generation/genAIImage: ".concat(o.error.message)),o}),L=(0,n.hg)("generation/setPremiumInitialSettings",async(e,t)=>{let i=t.getState(),n=t.dispatch;JSON.stringify(i.generation.settings)===JSON.stringify((0,E.CB)())&&e&&n(C(E.EL))}),C=(0,n.hg)("generation/setSettings",async(e,t)=>{let i=t.getState(),n=e;if((0,a.AT)(e)){let{updatedAlchemyTrialStateData:i,...o}=await (0,f.ef)(t,e);n={...n,...o},(0,f.SD)({thunkApi:t,alchemyTrialStateData:i})}return new o.Z({modelInfoMap:i.generation.modelInfo.modelInfoMap}).transform({currentSettings:i.generation.settings,nextSettings:n})}),w=(0,n.hg)("generation/remixSettings",async(e,t)=>{let i=t.getState(),n=(0,r.WO)(e,i.generation.settings),s=n;if((0,a.AT)(n)){let{updatedAlchemyTrialStateData:e,...i}=await (0,f.ef)(t,n);s={...n,...i},(0,f.SD)({thunkApi:t,alchemyTrialStateData:e})}return new o.Z({modelInfoMap:i.generation.modelInfo.modelInfoMap}).transform({currentSettings:n,nextSettings:s})})},4182:function(e,t,i){i.d(t,{m4:function(){return T},ZP:function(){return M},I$:function(){return _},eq:function(){return h},hS:function(){return p},_6:function(){return S}});var n={};i.r(n),i.d(n,{closeStackedModal:function(){return u},openStackedModal:function(){return m},resetViewed:function(){return l},setHasViewed:function(){return g},setModalData:function(){return d}});var o=i(68714),a=i(38896),r=i(76295),s=i(34419);let g=(e,t)=>{let{modal:i,version:n}=t.payload;e.hasViewed[i]=null==n||n},l=(e,t)=>{e.hasViewed[t.payload.modal]=!1},d=(e,t)=>{t.payload.data?e.data[t.payload.modal]=t.payload.data:delete e.data[t.payload.modal]},m=(e,t)=>{var i;let n=null!==(i=t.payload.priority)&&void 0!==i?i:s.u[t.payload.modal].priority;if(e.stack.find(e=>e.id===t.payload.modal))return;let o=Array.from(e.stack.map(e=>({...e}))),a={id:t.payload.modal,priority:n},r=[],g=[];o.forEach(e=>{(e.priority?r:g).push(e)}),n?(r.push(a),r.sort((e,t)=>{var i,n;return(null!==(i=t.priority)&&void 0!==i?i:0)-(null!==(n=e.priority)&&void 0!==n?n:0)})):g.unshift(a),e.stack=[...r,...g]},u=(e,t)=>{let i=e.stack.findIndex(e=>e.id===t.payload.modal);if(-1===i)return;let n=Array.from(e.stack.map(e=>({...e})));n.splice(i,1),e.stack=n},c={hasViewed:Object.keys(s.Z).reduce((e,t)=>({...e,[t]:!1}),{}),data:{},stack:[]},I=(0,o.oM)({name:"modal",initialState:c,reducers:n}),{setHasViewed:p,resetViewed:h,setModalData:S,openStackedModal:_,closeStackedModal:T}=I.actions;I.reducer;var M=(0,a.OJ)({key:"modals",storage:r.Z,whitelist:["hasViewed","data"]},I.reducer)},34419:function(e,t,i){var n,o;i.d(t,{u:function(){return a}}),(o=n||(n={})).UPDATE="UPDATE",o.UPGRADE="UPGRADE",o.USER_DETAILS="USER_DETAILS",o.ONBOARDING="ONBOARDING",o.ONBOARDING_GET_STARTED="ONBOARDING_GET_STARTED",o.ANNOUNCEMENTS="ANNOUNCEMENTS",o.ALCHEMY_EXPIRED="ALCHEMY_EXPIRED",o.FEATURE_INTRO_ALCHEMY_TRIAL="FEATURE_INTRO_ALCHEMY_TRIAL",o.FEATURE_INTRO_MOTION="FEATURE_INTRO_MOTION",o.FEATURE_INTRO_PHOTO_REAL="FEATURE_INTRO_PHOTO_REAL",o.FEATURE_INTRO_ELEMENTS="FEATURE_INTRO_ELEMENTS",o.FEATURE_INTRO_ELEMENTS_SPLASH="FEATURE_INTRO_ELEMENTS_SPLASH",o.FEATURE_INTRO_ALCHEMY_V2_SPLASH="FEATURE_INTRO_ALCHEMY_V2_SPLASH",o.FEATURE_INTRO_MOTION_SPLASH="FEATURE_INTRO_MOTION_SPLASH",o.FEATURE_INTRO_MOTION_INSTRUCTIONS="FEATURE_INTRO_MOTION_INSTRUCTIONS",o.FEATURE_INTRO_UNIVERSAL_UPSCALER="FEATURE_INTRO_UNIVERSAL_UPSCALER",o.FEATURE_INTRO_UNIVERSAL_UPSCALER_SPLASH="FEATURE_INTRO_UNIVERSAL_UPSCALER_SPLASH",o.PROMPT_MAGIC_SETTINGS="PROMPT_MAGIC_SETTINGS",o.ALCHEMY_GENERATIONS_USED="ALCHEMY_GENERATIONS_USED",o.ELEMENTS="ELEMENTS",o.DRAWER_MOBILE_APP_AVAILABILITY="DRAWER_MOBILE_APP_AVAILABILITY",o.SELECT_IMAGE_INPUT="SELECT_IMAGE_INPUT";let a={UPDATE:{priority:1e3,viewOnce:!0},USER_DETAILS:{priority:100,viewOnce:!0},ONBOARDING:{priority:95},ONBOARDING_GET_STARTED:{priority:95},ANNOUNCEMENTS:{priority:90,viewOnce:!0},UPGRADE:{priority:85,viewOnce:!0},ALCHEMY_EXPIRED:{priority:80},FEATURE_INTRO_UNIVERSAL_UPSCALER_SPLASH:{priority:75,viewOnce:!0},FEATURE_INTRO_ALCHEMY_V2_SPLASH:{priority:70,viewOnce:!0,disabled:!0},FEATURE_INTRO_ELEMENTS_SPLASH:{priority:70,viewOnce:!0},DRAWER_MOBILE_APP_AVAILABILITY:{priority:70},FEATURE_INTRO_MOTION:{priority:null,viewOnce:!0,disabled:!0},FEATURE_INTRO_MOTION_SPLASH:{priority:null,viewOnce:!0,disabled:!0},FEATURE_INTRO_MOTION_INSTRUCTIONS:{priority:null,viewOnce:!0},FEATURE_INTRO_ALCHEMY_TRIAL:{priority:null,viewOnce:!0,disabled:!0},FEATURE_INTRO_PHOTO_REAL:{priority:null},FEATURE_INTRO_UNIVERSAL_UPSCALER:{priority:null,viewOnce:!0},PROMPT_MAGIC_SETTINGS:{priority:null},ALCHEMY_GENERATIONS_USED:{priority:null},FEATURE_INTRO_ELEMENTS:{priority:null,viewOnce:!0},ELEMENTS:{priority:null},SELECT_IMAGE_INPUT:{priority:null}};t.Z=n},9869:function(e,t,i){i.d(t,{Z:function(){return s}});var n=i(68714),o=i(59742),a=i(15586),r=i(62521);let s=(0,n.hg)("trials/updateAlchemyTrialState",async(e,t)=>{let{getState:i}=t,{user:n}=i();return"FREE"!==n.plan&&(0,r.CP)()?null:(await a.Z.query({query:o.xaI,fetchPolicy:"network-only"})).data.queryUserAlchemyTrial})}}]);